<!DOCTYPE html>
<html>
<head>
    <title>Virtual Ruler</title>
    <link rel="stylesheet" type="text/css" href="vr_stylesheet.css">
</head>
<body>
<div id="container">
    <div id="wrapper">
        <div id="content">
            <h2>
                Welcome to my page!
            </h2>
            <p><strong>Content here.</strong></p>
            <p>
                A scanning electron microscope (SEM) is a type of electron microscope that produces images of a sample by scanning the
                surface with a focused beam of electrons. The electrons interact with atoms in the sample, producing various signals
                that contain information about the surface topography and composition of the sample. The electron beam is scanned in a
                raster scan pattern, and the position of the beam is combined with the detected signal to produce an image. SEM can
                achieve resolution better than 1 nanometer. Specimens are observed in high vacuum in conventional SEM, or in low vacuum
                or wet conditions in variable pressure or environmental SEM, and at a wide range of cryogenic or elevated temperatures
                with specialized instruments.
                <a href="https://en.wikipedia.org/wiki/Scanning_electron_microscope">Ref: Wikipedia</a>
            </p>
            

            <canvas id="myCanvas" onclick="getCursorPosition(event)" oncontextmenu="getCursorPosition(event)" 
            width="700" height="500" style="border:1px solid #d3d3d3;"></canvas>
            
            <script>
                let c = document.getElementById("myCanvas");
                let ctx = c.getContext("2d"); //ctx stands for context
                loadImg();

                function loadImg() {

                    let img1 = new Image();

                    img1.onload = function () {
                        ctx.drawImage(img1, 0, 0);
                    }

                    img1.src = "/home/paluchasz/web_stack_tutorials/project/Misc_pollen.jpg";   
                }

            </script>

            <script>
                let init_coord = [];
                let fin_coord = [];
                let first_click = true;

                function getCursorPosition(event) {
                    
                    let c = document.getElementById("myCanvas");
                    let rect = c.getBoundingClientRect();
                    // Return the size of an element and its position relative to the viewport
                    let x = event.clientX - rect.left;
                    let y = event.clientY - rect.top;
                    
                    // console.log(event.clientX, rect.left, event.clientY, rect.top)
                    // event.clientX and event.clientY output the horizontal, x and vertical, y components
                    // of the mouse pointer (always referenced to the top left corner of page which is (0,0))
                    // The rect.left and rect.top give the x/y coordinates of left and top side of rect
                    // respectively. Hence if we scroll up or down the rect.top changes
                    // uncomment above to see 

                    if (first_click) {
                        init_coord = [x, y];
                        first_click = false;
                        console.log(init_coord);
                        return; //to make sure once we assign first_click to false it doesn't 
                        // immediately go to the else clause 
                    }

                    else {
                        fin_coord = [x, y];
                        distance = Math.sqrt((fin_coord[0] - init_coord[0])**2 
                        + (fin_coord[1] - init_coord[1])**2);
                        first_click = true;
                        console.log(distance, fin_coord);
                    }
                }

            </script>
            

        </div>
    </div>
</div>
</body>
</html>